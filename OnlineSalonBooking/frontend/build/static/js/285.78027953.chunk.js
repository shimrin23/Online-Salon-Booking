"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[285],{285:function(e,r,a){a.r(r);var t=a(4165),n=a(5861),s=a(4942),i=a(1413),o=a(9439),u=a(2791),c=a(7689),l=a(1087),p=(a(1734),a(3263)),d=a(3402),m=a(184);p.Z.defaults.baseURL={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SERVER_DOMAIN,r.default=function(){var e=(0,u.useState)(""),r=(0,o.Z)(e,2),a=r[0],f=r[1],_=(0,u.useState)(!1),g=(0,o.Z)(_,2),S=g[0],E=g[1],h=(0,u.useState)({firstname:"",lastname:"",email:"",password:"",confpassword:""}),P=(0,o.Z)(h,2),b=P[0],x=P[1],T=(0,c.s0)(),v=function(e){var r=e.target,a=r.name,t=r.value;x((function(e){return(0,i.Z)((0,i.Z)({},e),{},(0,s.Z)({},a,t))}))},C=function(){var e=(0,n.Z)((0,t.Z)().mark((function e(r){var a,n,s;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r){e.next=2;break}return e.abrupt("return");case 2:if(E(!0),"image/jpeg"!==r.type&&"image/png"!==r.type){e.next=23;break}return(a=new FormData).append("file",r),a.append("upload_preset",{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_CLOUDINARY_PRESET),a.append("cloud_name",{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_CLOUDINARY_CLOUD_NAME),e.prev=8,e.next=11,fetch({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_CLOUDINARY_BASE_URL,{method:"POST",body:a});case 11:return n=e.sent,e.next=14,n.json();case 14:s=e.sent,f(s.url.toString()),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(8),d.ZP.error("Image upload failed. Please try again.");case 21:e.next=24;break;case 23:d.ZP.error("Please select an image in jpeg or png format");case 24:E(!1);case 25:case"end":return e.stop()}}),e,null,[[8,18]])})));return function(r){return e.apply(this,arguments)}}(),O=function(){var e=(0,n.Z)((0,t.Z)().mark((function e(r){var n,s,i,o,u;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.preventDefault(),!S){e.next=3;break}return e.abrupt("return",d.ZP.error("Image upload in progress. Please wait."));case 3:if(a){e.next=5;break}return e.abrupt("return",d.ZP.error("Please upload a profile picture."));case 5:if(n=b.firstname,s=b.lastname,i=b.email,o=b.password,u=b.confpassword,n&&s&&i&&o&&u){e.next=8;break}return e.abrupt("return",d.ZP.error("All fields are required"));case 8:if(!(n.length<3)){e.next=10;break}return e.abrupt("return",d.ZP.error("First name must be at least 3 characters long"));case 10:if(!(s.length<3)){e.next=12;break}return e.abrupt("return",d.ZP.error("Last name must be at least 3 characters long"));case 12:if(!(o.length<5)){e.next=14;break}return e.abrupt("return",d.ZP.error("Password must be at least 5 characters long"));case 14:if(o===u){e.next=16;break}return e.abrupt("return",d.ZP.error("Passwords do not match"));case 16:return e.prev=16,e.next=19,d.ZP.promise(p.Z.post("/user/register",{firstname:n,lastname:s,email:i,password:o,pic:a}),{pending:"Registering user...",success:"User registered successfully",error:"Unable to register user"});case 19:T("/login"),e.next=26;break;case 22:e.prev=22,e.t0=e.catch(16),d.ZP.error("Registration failed. Please try again."),console.error(e.t0);case 26:case"end":return e.stop()}}),e,null,[[16,22]])})));return function(r){return e.apply(this,arguments)}}();return(0,m.jsx)("section",{className:"register-section flex-center",children:(0,m.jsxs)("div",{className:"register-container flex-center",children:[(0,m.jsx)("h2",{className:"form-heading",children:"Sign Up"}),(0,m.jsxs)("form",{onSubmit:O,className:"register-form",children:[(0,m.jsx)("input",{type:"text",name:"firstname",className:"form-input",placeholder:"Enter your first name",value:b.firstname,onChange:v,required:!0}),(0,m.jsx)("input",{type:"text",name:"lastname",className:"form-input",placeholder:"Enter your last name",value:b.lastname,onChange:v,required:!0}),(0,m.jsx)("input",{type:"email",name:"email",className:"form-input",placeholder:"Enter your email",value:b.email,onChange:v,required:!0}),(0,m.jsx)("input",{type:"file",name:"profile-pic",id:"profile-pic",className:"form-input",accept:"image/png, image/jpeg",onChange:function(e){return C(e.target.files[0])}}),(0,m.jsx)("input",{type:"password",name:"password",className:"form-input",placeholder:"Enter your password",value:b.password,onChange:v,required:!0}),(0,m.jsx)("input",{type:"password",name:"confpassword",className:"form-input",placeholder:"Confirm your password",value:b.confpassword,onChange:v,required:!0}),(0,m.jsx)("button",{type:"submit",className:"btn form-btn",disabled:S,children:"Sign Up"})]}),(0,m.jsxs)("p",{children:["Already a user?"," ",(0,m.jsx)(l.OL,{className:"login-link",to:"/login",children:"Log in"})]}),(0,m.jsx)(l.rU,{to:"/",className:"btn home-btn",children:"\u2190 Back to Home"})]})})}},1734:function(){}}]);
//# sourceMappingURL=285.78027953.chunk.js.map