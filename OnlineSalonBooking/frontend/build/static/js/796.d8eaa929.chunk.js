"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[796],{4971:function(e,r,a){var n=a(4165),t=a(5861),s=a(3263);s.Z.defaults.baseURL={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SERVER_DOMAIN;var o=function(){var e=(0,t.Z)((0,n.Z)().mark((function e(r){var a,t;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,s.Z.get(r,{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});case 3:return a=e.sent,t=a.data,e.abrupt("return",t);case 8:throw e.prev=8,e.t0=e.catch(0),console.error("API fetch error:",e.t0),e.t0;case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(r){return e.apply(this,arguments)}}();r.Z=o},7796:function(e,r,a){a.r(r),a.d(r,{default:function(){return g}});var n=a(4942),t=a(4165),s=a(1413),o=a(5861),l=a(9439),i=a(2791),c=a(3263),u=a(3402),p=a(5318),m=a(9434),d=a(3200),f=a(4971),h=a(456),v=a(184);c.Z.defaults.baseURL={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SERVER_DOMAIN;var g=function(){var e=(0,h.Z)(localStorage.getItem("token")).userId,r=(0,m.I0)(),a=(0,m.v9)((function(e){return e.root})).loading,g=(0,i.useState)(""),x=(0,l.Z)(g,2),b=x[0],w=x[1],Z=(0,i.useState)({firstname:"",lastname:"",email:"",age:"",mobile:"",gender:"neither",address:"",password:"",confpassword:""}),E=(0,l.Z)(Z,2),S=E[0],N=E[1],j=function(){var a=(0,o.Z)((0,t.Z)().mark((function a(){var n,o,l;return(0,t.Z)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,r((0,p.K4)(!0)),a.next=4,(0,f.Z)("/user/getuser/".concat(e));case 4:l=a.sent,N((0,s.Z)((0,s.Z)({},l),{},{password:"",confpassword:"",mobile:null!==(n=l.mobile)&&void 0!==n?n:"",age:null!==(o=l.age)&&void 0!==o?o:""})),w(l.pic),r((0,p.K4)(!1)),a.next=15;break;case 10:a.prev=10,a.t0=a.catch(0),r((0,p.K4)(!1)),u.ZP.error("Failed to load profile."),console.error(a.t0);case 15:case"end":return a.stop()}}),a,null,[[0,10]])})));return function(){return a.apply(this,arguments)}}();(0,i.useEffect)((function(){j()}),[]);var P=function(e){var r=e.target,a=r.name,t=r.value;N((function(e){return(0,s.Z)((0,s.Z)({},e),{},(0,n.Z)({},a,t))}))},_=function(){var e=(0,o.Z)((0,t.Z)().mark((function e(r){var a,n,o,l,i,p,m,d,f;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.preventDefault(),e.prev=1,a=S.firstname,n=S.lastname,o=S.email,l=S.age,i=S.mobile,p=S.address,m=S.gender,d=S.password,f=S.confpassword,o){e.next=5;break}return e.abrupt("return",u.ZP.error("Email should not be empty"));case 5:if(!(a.length<3)){e.next=7;break}return e.abrupt("return",u.ZP.error("First name must be at least 3 characters long"));case 7:if(!(n.length<3)){e.next=9;break}return e.abrupt("return",u.ZP.error("Last name must be at least 3 characters long"));case 9:if(!(d.length>0&&d.length<5)){e.next=11;break}return e.abrupt("return",u.ZP.error("Password must be at least 5 characters long"));case 11:if(d===f){e.next=13;break}return e.abrupt("return",u.ZP.error("Passwords do not match"));case 13:return e.next=15,u.ZP.promise(c.Z.put("/user/updateprofile",{firstname:a,lastname:n,age:l,mobile:i,address:p,gender:m,email:o,password:d||void 0},{headers:{authorization:"Bearer ".concat(localStorage.getItem("token"))}}),{pending:"Updating profile...",success:"Profile updated successfully",error:"Unable to update profile"});case 15:N((function(e){return(0,s.Z)((0,s.Z)({},e),{},{password:"",confpassword:""})})),e.next=22;break;case 18:e.prev=18,e.t0=e.catch(1),u.ZP.error("Unable to update profile"),console.error(e.t0);case 22:case"end":return e.stop()}}),e,null,[[1,18]])})));return function(r){return e.apply(this,arguments)}}();return(0,v.jsx)(v.Fragment,{children:a?(0,v.jsx)(d.Z,{}):(0,v.jsx)("section",{className:"register-section flex-center",children:(0,v.jsxs)("div",{className:"profile-container flex-center",children:[(0,v.jsx)("h2",{className:"form-heading",children:"Profile"}),(0,v.jsx)("img",{src:b,alt:"profile",className:"profile-pic"}),(0,v.jsxs)("form",{onSubmit:_,className:"register-form",children:[(0,v.jsxs)("div",{className:"form-same-row",children:[(0,v.jsx)("input",{type:"text",name:"firstname",className:"form-input",placeholder:"Enter your first name",value:S.firstname,onChange:P,required:!0}),(0,v.jsx)("input",{type:"text",name:"lastname",className:"form-input",placeholder:"Enter your last name",value:S.lastname,onChange:P,required:!0})]}),(0,v.jsxs)("div",{className:"form-same-row",children:[(0,v.jsx)("input",{type:"email",name:"email",className:"form-input",placeholder:"Enter your email",value:S.email,onChange:P,required:!0}),(0,v.jsxs)("select",{name:"gender",value:S.gender,className:"form-input",onChange:P,children:[(0,v.jsx)("option",{value:"neither",children:"Prefer not to say"}),(0,v.jsx)("option",{value:"male",children:"Male"}),(0,v.jsx)("option",{value:"female",children:"Female"})]})]}),(0,v.jsxs)("div",{className:"form-same-row",children:[(0,v.jsx)("input",{type:"number",name:"age",className:"form-input",placeholder:"Enter your age",value:S.age,onChange:P,min:0}),(0,v.jsx)("input",{type:"tel",name:"mobile",className:"form-input",placeholder:"Enter your mobile number",value:S.mobile,onChange:P})]}),(0,v.jsx)("textarea",{name:"address",className:"form-input",placeholder:"Enter your address",value:S.address,onChange:P,rows:"2"}),(0,v.jsxs)("div",{className:"form-same-row",children:[(0,v.jsx)("input",{type:"password",name:"password",className:"form-input",placeholder:"Enter new password",value:S.password,onChange:P}),(0,v.jsx)("input",{type:"password",name:"confpassword",className:"form-input",placeholder:"Confirm new password",value:S.confpassword,onChange:P})]}),(0,v.jsx)("button",{type:"submit",className:"btn form-btn",children:"Update"})]})]})})})}}}]);
//# sourceMappingURL=796.d8eaa929.chunk.js.map