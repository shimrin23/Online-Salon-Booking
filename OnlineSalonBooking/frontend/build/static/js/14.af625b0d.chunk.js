"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[14],{2797:()=>{},5789:(e,s,n)=>{n.d(s,{A:()=>t});var r=n(9722);const t=async e=>{try{const s=localStorage.getItem("token"),{data:n}=await r.A.get(e,{headers:{Authorization:"Bearer ".concat(s)}});return n}catch(s){throw console.error("API fetch error:",s),s}}},7014:(e,s,n)=>{n.r(s),n.d(s,{default:()=>p});var r=n(2555),t=n(5043),a=n(3216),l=n(5475),o=(n(2797),n(9722)),i=n(2339),c=n(9456),d=n(5089),h=n(7070),m=n(5789),u=n(8114),g=n(579);const p=function(){const e=(0,c.wA)(),[s,n]=(0,t.useState)({email:"",password:""}),p=(0,a.Zp)(),x=e=>{const{name:t,value:a}=e.target;n((0,r.A)((0,r.A)({},s),{},{[t]:a}))};return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(u.A,{})," ",(0,g.jsx)("section",{className:"register-section flex-center",children:(0,g.jsxs)("div",{className:"register-container flex-center",children:[(0,g.jsx)("h2",{className:"form-heading",children:"Sign In"}),(0,g.jsxs)("form",{onSubmit:async n=>{n.preventDefault();try{const{email:n,password:r}=s;if(!n||!r)return i.Ay.error("Input field should not be empty");if(r.length<5)return i.Ay.error("Password must be at least 5 characters long");const{data:t}=await i.Ay.promise(o.A.post("/api/users/login",{email:n,password:r}),{pending:"Logging in...",success:"Login successful",error:"Unable to login user",loading:"Logging user..."});localStorage.setItem("token",t.token);const a=(0,h.A)(t.token).userId,l=await(0,m.A)("/api/users/getuser/".concat(a));e((0,d.iA)(l)),l.isAdmin?p("/dashboard"):p("/")}catch(r){i.Ay.error("Login failed. Please check your credentials."),console.error("Login error:",r)}},className:"register-form",children:[(0,g.jsx)("input",{type:"email",name:"email",className:"form-input",placeholder:"Enter your email",value:s.email,onChange:x}),(0,g.jsx)("input",{type:"password",name:"password",className:"form-input",placeholder:"Enter your password",value:s.password,onChange:x}),(0,g.jsx)("button",{type:"submit",className:"btn form-btn",children:"Sign In"})]}),(0,g.jsxs)("p",{children:["Not a user?"," ",(0,g.jsx)(l.k2,{className:"login-link",to:"/register",children:"Sign up"})]})]})})]})}},8114:(e,s,n)=>{n.d(s,{A:()=>m});var r=n(5043),t=n(3216),a=n(5475),l=n(9456),o=n(5089),i=n(1009),c=n(5922),d=n(7070),h=n(579);const m=()=>{const[e,s]=(0,r.useState)(!1),n=(0,l.wA)(),m=(0,t.Zp)(),[u]=(0,r.useState)(localStorage.getItem("token")||""),[g]=(0,r.useState)(localStorage.getItem("token")?(0,d.A)(localStorage.getItem("token")):"");return(0,h.jsxs)("header",{children:[(0,h.jsxs)("nav",{className:e?"nav-active":"",children:[(0,h.jsx)("h2",{className:"nav-logo",children:(0,h.jsx)(a.k2,{to:"/",children:"SalonBooker"})}),(0,h.jsxs)("ul",{className:"nav-links",children:[(0,h.jsx)("li",{children:(0,h.jsx)(a.k2,{to:"/",children:"Home"})}),u&&g.isAdmin?null:(0,h.jsx)("li",{children:(0,h.jsx)(a.k2,{to:"/stylists",children:"Stylists"})}),u&&g.isAdmin&&(0,h.jsx)("li",{children:(0,h.jsx)(a.k2,{to:"/dashboard/users",children:"Dashboard"})}),u&&!g.isAdmin&&(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)("li",{children:(0,h.jsx)(a.k2,{to:"/applyforstylist",children:"Apply for Stylist"})}),(0,h.jsx)("li",{children:(0,h.jsx)(a.k2,{to:"/profile",children:"Profile"})})]}),u?(0,h.jsx)("li",{children:(0,h.jsx)("span",{className:"btn",onClick:()=>{n((0,o.iA)({})),localStorage.removeItem("token"),m("/login")},children:"Logout"})}):(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)("li",{children:(0,h.jsx)(a.k2,{className:"btn",to:"/login",children:"Login"})}),(0,h.jsx)("li",{children:(0,h.jsx)(a.k2,{className:"btn",to:"/register",children:"SignUp"})})]})]})]}),(0,h.jsxs)("div",{className:"menu-icons",children:[!e&&(0,h.jsx)(i.ND1,{className:"menu-open",onClick:()=>s(!0)}),e&&(0,h.jsx)(c.clO,{className:"menu-close",onClick:()=>s(!1)})]})]})}}}]);
//# sourceMappingURL=14.af625b0d.chunk.js.map